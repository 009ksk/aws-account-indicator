# AWS Account Indicator

複数のAWSアカウントを使用する際に、現在どのアカウントにログインしているかを視覚的に識別できるChrome拡張機能です。

## 主な機能

### 🎨 視覚的な識別
- **ヘッダー・フッターの色変更**: 各AWSアカウントに個別の背景色を設定
- **自動テキスト色調整**: 背景色に応じて見やすいテキスト色を自動選択
- **アカウント名ウォーターマーク**: 画面上にアカウント名をウォーターマークとして表示

### 🔧 柔軟な設定
- **表形式の設定画面**: アカウント番号、表示名、色を一行で簡単設定
- **ドラッグ可能なウォーターマーク**: 画面内の任意の位置に移動可能
- **設定のエクスポート/インポート**: 設定の共有やバックアップが可能

### 🌐 幅広い対応
- **AWS Management Console**: 通常のAWSコンソール
- **AWS SSO (Identity Center)**: SSOログイン環境
- **スイッチロール**: 異なるアカウント間のロール切り替え

## インストール方法

### 開発版のインストール

1. このリポジトリをクローンまたはダウンロード
```bash
git clone https://github.com/yourusername/aws-account-indicator.git
cd aws-account-indicator
```

2. Chromeで`chrome://extensions/`にアクセス

3. 右上の「デベロッパーモード」を有効化

4. 「パッケージ化されていない拡張機能を読み込む」をクリック

5. ダウンロードしたフォルダを選択

### アイコンの準備

拡張機能を完全に動作させるには、`icons`フォルダに以下のファイルを配置してください：

- `icon16.png` (16x16px)
- `icon48.png` (48x48px) 
- `icon128.png` (128x128px)

## 使い方

### 基本設定

1. 拡張機能のアイコンをクリックして設定画面を開く

2. 「アカウント追加」ボタンで新しいアカウントを追加

3. 以下の情報を入力：
   - **アカウント番号**: 12桁のAWSアカウント番号
   - **表示名**: 分かりやすい名前（例：「本番環境」「開発環境」）
   - **背景色**: ヘッダー・フッターに適用する色

4. 💾ボタンで設定を保存

### クイック設定

現在AWSコンソールにログインしている場合：

1. 設定画面上部の「このアカウントを設定」ボタンをクリック
2. アカウント番号が自動入力されるので、名前と色を設定
3. 保存

### ウォーターマークの移動

- ウォーターマークをドラッグして好きな位置に移動
- 位置は自動的に保存され、次回訪問時に復元

### グローバル設定

- **ウォーターマーク表示**: アカウント名の表示ON/OFF
- **ヘッダー色変更**: ヘッダーの色変更ON/OFF  
- **フッター色変更**: フッターの色変更ON/OFF

## 対応環境

### AWSサービス
- AWS Management Console (全サービス)
- AWS SSO/Identity Center
- スイッチロール環境

### ブラウザ
- Google Chrome (Manifest V3対応)
- Chromium系ブラウザ

### 検出方法
拡張機能は以下の方法でアカウント情報を検出します：

1. DOM要素からの抽出
2. URLパラメータからの解析
3. ローカルストレージからの取得

## 設定の管理

### エクスポート
設定画面の「設定エクスポート」でJSON形式でダウンロード

### インポート
「設定インポート」で既存の設定ファイルを読み込み

### リセット
「設定リセット」ですべての設定を初期化

## トラブルシューティング

### アカウントが検出されない
1. ページを再読み込み
2. AWSコンソールに完全にログインしているか確認
3. URLが対応サイトに含まれているか確認

### 色が適用されない
1. ページを再読み込み
2. グローバル設定で色変更が有効になっているか確認
3. 他の拡張機能との競合を確認

### ウォーターマークが表示されない
1. グローバル設定でウォーターマーク表示が有効か確認
2. ページを再読み込み
3. アカウントが正しく設定されているか確認

## 開発者向け情報

### ファイル構成
```
aws-account-indicator/
├── manifest.json          # 拡張機能の設定
├── content.js             # AWSページで実行されるスクリプト
├── content.css            # コンテンツスクリプト用スタイル
├── popup.html             # 設定画面のHTML
├── popup.js               # 設定画面のロジック
├── popup.css              # 設定画面のスタイル
├── background.js          # バックグラウンドスクリプト
├── icons/                 # アイコンファイル
└── README.md              # このファイル
```

### 主要クラス

#### `AWSAccountIndicator` (content.js)
- アカウント情報の検出
- UI要素の色変更
- ウォーターマークの表示・制御

#### `PopupManager` (popup.js)  
- 設定画面の管理
- アカウント設定のCRUD操作
- エクスポート/インポート機能

#### `BackgroundManager` (background.js)
- 拡張機能のライフサイクル管理
- タブ間でのメッセージング
- 設定の同期

### カスタマイズ

#### 新しいAWS URLパターンの追加
`manifest.json`の`content_scripts.matches`に追加：

```json
"matches": [
  "https://*.amazonaws.com/*",
  "https://*.aws.amazon.com/*",
  "https://your-custom-aws-domain.com/*"
]
```

#### アカウント検出ロジックの拡張
`content.js`の`getAccountNumberFromDOM()`メソッドに新しいセレクタを追加：

```javascript
const selectors = [
  // 既存のセレクタ...
  '.your-custom-selector',
  '[data-your-attribute]'
];
```

## ライセンス

MIT License - 詳細は[LICENSE](LICENSE)ファイルを参照

## 貢献

プルリクエストやイシューの報告を歓迎します。

## 更新履歴

### v1.0.0 (2025-08-07)
- 初回リリース
- 基本的なアカウント識別機能
- ヘッダー・フッター色変更
- ウォーターマーク表示
- 設定画面
- エクスポート/インポート機能
